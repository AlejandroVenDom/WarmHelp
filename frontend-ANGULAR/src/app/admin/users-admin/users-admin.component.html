<div class="users-admin-container">
  <h2 class="titulo-seccion">
    <i class="bi bi-people-fill"></i> Administración de Usuarios
  </h2>

  <!-- Filtros -->
  <div class="acciones-admin">
    <div class="buscador">
      <input type="text" [(ngModel)]="filtroBusqueda" (input)="filtrarUsuarios()" placeholder="Buscar usuario...">
      <button (click)="resetearFiltros()" title="Resetear filtros"><i class="bi bi-arrow-clockwise"></i></button>
    </div>
    <div class="cantidad">
      <label>Mostrar:</label>
      <select [(ngModel)]="cantidadMostrar" (change)="onCantidadChange()">
        <option *ngFor="let c of cantidadesDisponibles" [value]="c">{{ c }}</option>
      </select>
    </div>
  </div>

  <!-- Formulario -->
  <form [formGroup]="userForm" (ngSubmit)="submit()" class="formulario">
    <div class="form-grid">
      <input formControlName="username" placeholder="Nombre de usuario" />
      <input formControlName="email" placeholder="Correo electrónico" />
      <input formControlName="first_name" placeholder="Nombre" />
      <input formControlName="last_name" placeholder="Apellido" />
      <input formControlName="address" placeholder="Dirección" />
      <input formControlName="number" placeholder="Teléfono" />
      <textarea formControlName="mySelf_description" rows="3" placeholder="Sobre mí..."></textarea>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-guardar">{{ isEditing ? 'Guardar Cambios' : 'Crear Usuario' }}</button>
      <button type="button" class="btn-cancelar" (click)="cancelEdit()">Cancelar</button>
      <button type="button" class="btn-guardar" (click)="generatePDF()">Generar PDF de Usuarios</button>
    </div>
  </form>

  <!-- Lista de Usuarios -->
  <div class="users-grid">
    <div *ngFor="let user of users" class="user-card">
      <h4><i class="bi bi-person-badge-fill"></i> {{ user.username }}</h4>
      <p><i class="bi bi-envelope"></i> {{ user.email }}</p>
      <p><i class="bi bi-person-lines-fill"></i> {{ user.first_name }} {{ user.last_name }}</p>
      <p><i class="bi bi-geo-alt-fill"></i> {{ user.address }}</p>
      <p><i class="bi bi-phone-fill"></i> {{ user.number }}</p>
      <p><i class="bi bi-list-columns-reverse"></i> Descripción: {{ user.mySelf_description }}</p>

      <div class="btn-actions">
        <button class="btn-editar" (click)="startEdit(user)">
          <i class="bi bi-pencil-fill"></i> Editar
        </button>
        <button class="btn-eliminar" (click)="deleteUser(user.idUser)">
          <i class="bi bi-trash-fill"></i> Eliminar
        </button>
      </div>
    </div>
  </div>

  <!-- Paginación -->
  <div class="paginacion" *ngIf="totalPaginas > 1">
    <button (click)="cambiarPagina(-1)" [disabled]="paginaActual === 1">Anterior</button>
    <span *ngFor="let p of paginas" [class.activa]="p === paginaActual" (click)="irAPagina(p)">
      {{ p }}
    </span>
    <button (click)="cambiarPagina(1)" [disabled]="paginaActual === totalPaginas">Siguiente</button>
  </div>
</div>
