<div class="admin-servicios-container">
  <h2 class="titulo-seccion">
    <i class="bi bi-briefcase-fill"></i> Panel de Servicios Profesionales
  </h2>

  <div class="acciones-admin">
    <div class="buscador">
      <input type="text" [(ngModel)]="filtroBusqueda" (input)="filtrarServicios()" placeholder="Buscar...">
      <button (click)="resetearFiltros()" title="Resetear filtros"><i class="bi bi-arrow-clockwise"></i></button>
    </div>
    <div class="cantidad">
      <label>Mostrar:</label>
      <select [(ngModel)]="cantidadMostrar" (change)="onCantidadChange()">
        <option *ngFor="let c of cantidadesDisponibles" [value]="c">{{ c }}</option>
      </select>
    </div>
  </div>

  <div class="admin-lista">
    <div *ngFor="let s of serviciosFiltrados" class="servicio-card">
      <div class="servicio-header">
        <h4><i class="bi bi-tag-fill"></i> {{ s.title }}</h4>
        <div class="acciones">
          <button class="btn-icon editar" title="Editar" (click)="abrirModalEditar(s)">
            <i class="bi bi-pencil-square"></i>
          </button>
          <button class="btn-icon eliminar" (click)="eliminarServicio(s.id!)" title="Eliminar">
            <i class="bi bi-trash-fill"></i>
          </button>
        </div>
      </div>

      <p class="descripcion">{{ s.description }}</p>

      <div class="info-extra">
        <p><i class="bi bi-person-fill"></i> <strong>Usuario:</strong> {{ s.userName }}</p>
        <p><i class="bi bi-currency-exchange"></i> <strong>Moneda:</strong> {{ s.currencyType }}</p>
        <p><i class="bi bi-cash-stack"></i> <strong>Precio:</strong> {{ s.price | currency:s.currencyType }}</p>
        <p><i class="bi bi-percent"></i> <strong>Impuesto:</strong> {{ s.tax }}%</p>
      </div>
    </div>
  </div>

  <div class="paginacion" *ngIf="totalPaginas > 1">
    <button (click)="cambiarPagina(-1)" [disabled]="paginaActual === 1">Anterior</button>
    <span *ngFor="let p of paginas" [class.activa]="p === paginaActual" (click)="irAPagina(p)">
      {{ p }}
    </span>
    <button (click)="cambiarPagina(1)" [disabled]="paginaActual === totalPaginas">Siguiente</button>
  </div>
</div>

<!-- Modal de edición -->
<div class="modal-editar" *ngIf="mostrarModal">
  <div class="modal-contenido">
    <h3>Editar Servicio</h3>
    <label>Título</label>
    <input [(ngModel)]="servicioEditando!.title" />

    <label>Descripción</label>
    <textarea [(ngModel)]="servicioEditando!.description"></textarea>

    <label>Precio</label>
    <input type="number" [(ngModel)]="servicioEditando!.price" />

    <label>Impuesto (%)</label>
    <input type="number" [(ngModel)]="servicioEditando!.tax" />

    <label>Moneda</label>
    <select [(ngModel)]="servicioEditando!.currencyType">
      <option value="USD">USD</option>
      <option value="EUR">EUR</option>
      <option value="JPY">JPY</option>
    </select>

    <div class="acciones-modal">
      <button class="btn-cancelar" (click)="cerrarModal()">Cancelar</button>
      <button class="btn-guardar" (click)="guardarCambios()">Guardar</button>
    </div>
  </div>
</div>
